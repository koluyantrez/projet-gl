{"ast":null,"code":"import \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport ItemButton from '../../elements/ItemButton.vue';\nimport Cookies from 'js-cookie';\nfunction determineUserRole(email) {\n  if (email.endsWith(\"@Illumis.assistant.ac.be\")) {\n    return \"assistant\";\n  } else if (email.endsWith(\"@Illumis.professeur.ac.be\")) {\n    return \"professeur\";\n  } else if (email.endsWith(\"@Illumis.student.ac.be\")) {\n    return \"student\";\n  } else if (email.endsWith(\"@Illumis.inscription.ac.be\")) {\n    return \"inscription\";\n  } else {\n    return \"inconnu\";\n  }\n}\nexport default {\n  components: {\n    ItemButton: ItemButton\n  },\n  data: function data() {\n    return {\n      items: [{\n        name: 'Identifiant'\n      }, {\n        name: 'Mot de passe'\n      }],\n      email: '',\n      password: '',\n      role: 'inconnu' // Initialisez le rôle à \"inconnu\",\n    };\n  },\n  methods: {\n    extractNumberBeforeAt: function extractNumberBeforeAt(email) {\n      var atIndex = email.indexOf('@');\n      if (atIndex !== -1) {\n        var number = email.substring(0, atIndex);\n        return number;\n      } else {\n        return null;\n      }\n    },\n    submitform: function submitform() {\n      var _this = this;\n      var authentification = {\n        email: this.email,\n        password: this.password\n      };\n      fetch('http://localhost:1937/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(authentification)\n      }).then(function (response) {\n        _this.role = determineUserRole(_this.email);\n        if (response.ok) {\n          alert(\"Authentification réussie\");\n          if (_this.role === 'student') {\n            // Stockage du mail et du mot de passe dans les cookies\n            Cookies.set('emailStudent', _this.email);\n            Cookies.set('passwordStudent', _this.password);\n            Cookies.set('role', _this.role);\n            console.log(\"cookies student : \" + Cookies.get('emailStudent'));\n            console.log(\"cookies password student \" + Cookies.get('passwordStudent'));\n            _this.$router.push({\n              name: 'student',\n              query: {\n                email: _this.email,\n                password: _this.password\n              }\n            });\n          } else if (_this.role === 'professeur') {\n            Cookies.set('emailProfesseur', _this.email);\n            Cookies.set('passwordProfesseur', _this.password);\n            Cookies.set('role', _this.role);\n            _this.$router.push({\n              name: 'prof',\n              query: {\n                email: _this.email,\n                password: _this.password\n              }\n            });\n          } else if (_this.role === 'inscription') {\n            Cookies.set('emailInscription', _this.email);\n            Cookies.set('passwordInscription', _this.password);\n            Cookies.set('role', _this.role);\n            var mat = _this.extractNumberBeforeAt(_this.email);\n            Cookies.set('matriculeInscription', mat);\n            _this.$router.push({\n              name: 'inscription'\n            });\n          }\n        } else if (response.status === 401) {\n          alert(\"Mot de passe incorrect\");\n        } else if (response.status === 404) {\n          alert(\"User non trouvé\");\n        } else if (response.status === 500) {\n          alert(\"Erreur inattendue\");\n        } else {\n          alert(\"Erreur de serveur inattendue\");\n        }\n      }).then(function () {\n        console.log(\"role : \" + _this.role);\n        Cookies.set('role ', _this.role);\n        console.log(\"cookies role :  \" + _this.role);\n        if (_this.role === 'assistant') {\n          // Reste du code pour le rôle d'assistant\n        } else if (_this.role === 'professeur') {\n          // Reste du code pour le rôle de professeur\n        } else if (_this.role === 'student') {\n          // Reste du code pour le rôle d'étudiant\n        } else {\n          console.log('Rôle d\\'utilisateur inconnu');\n        }\n      })[\"catch\"](function (error) {\n        console.error('Erreur : ', error.message);\n        alert('Erreur lors de la connexion au serveur : ' + error.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["ItemButton","Cookies","determineUserRole","email","endsWith","components","data","items","name","password","role","methods","extractNumberBeforeAt","atIndex","indexOf","number","substring","submitform","_this","authentification","fetch","method","headers","body","JSON","stringify","then","response","ok","alert","set","console","log","get","$router","push","query","mat","status","error","message"],"sources":["/home/koluyantrez/Documents/bac3/gl/Projet-developpement-logiciel-2024-main/src/main/java/com/genieLogiciel/Umons/frontend/src/components/everyone/FirstPage.vue"],"sourcesContent":["<template>\n  <div class=\"container1\">\n    <center>\n      <img class=\"logo\" src=\"../../assets/illumis.png\" alt=\"MyLogo\">\n      <h1>Université de la région de Kalos</h1>\n      <div class=\"input-container\">\n        <label>{{ items[0].name }}</label>\n        <input type=\"text\" v-model=\"email\" />\n      </div>\n      <div class=\"input-container\">\n        <label>{{ items[1].name }}</label>\n        <input type=\"password\" v-model=\"password\" />\n      </div>\n    </center>\n    <div class=\"forb\">\n      <ItemButton name=\"Connexion\" @click=\"submitform\" />\n      <router-link to=\"/guest\">\n        <ItemButton name=\"Invité\" />\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ItemButton from '../../elements/ItemButton.vue';\nimport Cookies from 'js-cookie';\n\nfunction determineUserRole(email) {\n  if (email.endsWith(\"@Illumis.assistant.ac.be\")) {\n    return \"assistant\";\n  } else if (email.endsWith(\"@Illumis.professeur.ac.be\")) {\n    return \"professeur\";\n  } else if (email.endsWith(\"@Illumis.student.ac.be\")) {\n    return \"student\";\n  }else if (email.endsWith(\"@Illumis.inscription.ac.be\")) {\n    return \"inscription\";\n  }\n  else {\n    return \"inconnu\";\n  }\n}\nexport default {\n  components: { ItemButton },\n  data() {\n    return {\n      items: [\n        { name: 'Identifiant' },\n        { name: 'Mot de passe' }\n      ],\n      email: '',\n      password: '',\n      role: 'inconnu', // Initialisez le rôle à \"inconnu\",\n    };\n  },\n  methods: {\n    extractNumberBeforeAt(email) {\n      const atIndex = email.indexOf('@');\n      if (atIndex !== -1) {\n        const number = email.substring(0, atIndex);\n        return number;\n      } else {\n        return null;\n      }\n    },\n    submitform() {\n      const authentification = {\n        email: this.email,\n        password: this.password,\n      };\n\n      fetch('http://localhost:1937/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(authentification)\n      })\n          .then(response => {\n            this.role = determineUserRole(this.email);\n            if (response.ok) {\n              alert(\"Authentification réussie\");\n              if (this.role === 'student') {\n                // Stockage du mail et du mot de passe dans les cookies\n                Cookies.set('emailStudent', this.email);\n                Cookies.set('passwordStudent', this.password);\n                Cookies.set('role' , this.role);\n                console.log(\"cookies student : \" + Cookies.get('emailStudent'));\n                console.log(\"cookies password student \" + Cookies.get('passwordStudent'));\n                this.$router.push({\n                  name: 'student',\n                  query: {\n                    email: this.email,\n                    password: this.password\n                  }\n                });\n              } else if (this.role === 'professeur'){\n                Cookies.set('emailProfesseur', this.email);\n                Cookies.set('passwordProfesseur', this.password);\n                Cookies.set('role' , this.role);\n                this.$router.push({\n                  name: 'prof',\n                  query: {\n                    email: this.email,\n                    password: this.password\n                  }\n                });\n              }else if (this.role === 'inscription'){\n                Cookies.set('emailInscription', this.email);\n                Cookies.set('passwordInscription', this.password);\n                Cookies.set('role' , this.role);\n                const mat = this.extractNumberBeforeAt(this.email)\n                Cookies.set('matriculeInscription' , mat);\n                this.$router.push({\n                  name: 'inscription',\n                });\n              }\n            } else if (response.status === 401) {\n              alert(\"Mot de passe incorrect\");\n            } else if (response.status === 404) {\n              alert(\"User non trouvé\");\n            } else if (response.status === 500) {\n              alert(\"Erreur inattendue\");\n            } else {\n              alert(\"Erreur de serveur inattendue\");\n            }\n          })\n          .then(() => {\n            console.log(\"role : \" + this.role);\n            Cookies.set('role ' , this.role);\n            console.log(\"cookies role :  \" + this.role);\n            if (this.role === 'assistant') {\n              // Reste du code pour le rôle d'assistant\n            } else if (this.role === 'professeur') {\n              // Reste du code pour le rôle de professeur\n            } else if (this.role === 'student') {\n              // Reste du code pour le rôle d'étudiant\n            } else {\n              console.log('Rôle d\\'utilisateur inconnu');\n            }\n          })\n          .catch(error => {\n            console.error('Erreur : ', error.message);\n            alert('Erreur lors de la connexion au serveur : ' + error.message);\n          });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.container1 h1 {\n  font-family: Roboto, sans-serif;\n  font-optical-sizing: auto;\n  font-size: 3rem;\n  font-stretch: 100%;\n  font-weight: 600;\n  color: rgb(236, 181, 181);\n}\n\n.logo {\n  width: 500px;\n  height: 220px;\n}\n\n.forb {\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n  align-items: center;\n}\n</style>\n\n<style>\nbody {\n  background-color: rgb(131, 10, 20);\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}