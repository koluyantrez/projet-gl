{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-2fea3988\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"container\"\n};\nvar _hoisted_2 = {\n  \"class\": \"add\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"modal\"\n};\nvar _hoisted_4 = {\n  \"class\": \"modal-content\"\n};\nvar _hoisted_5 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h2\", {\n    \"class\": \"modal-title\"\n  }, \"Sélection des cours\", -1 /* HOISTED */);\n});\nvar _hoisted_6 = {\n  \"class\": \"course-list\"\n};\nvar _hoisted_7 = {\n  \"class\": \"course-scroll\"\n};\nvar _hoisted_8 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_TopProf = _resolveComponent(\"TopProf\");\n  var _component_ItemCours = _resolveComponent(\"ItemCours\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_TopProf), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $options.showCourseSelection && $options.showCourseSelection.apply($options, arguments);\n    })\n  }, \"Ajouter un cours\")]), _createElementVNode(\"div\", {\n    \"class\": \"place\",\n    style: _normalizeStyle({\n      pointerEvents: $data.modalIsOpen ? 'none' : 'auto'\n    })\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.courses, function (cours, index) {\n    return _openBlock(), _createBlock(_component_ItemCours, {\n      word: cours,\n      key: index,\n      role: _ctx.role,\n      \"get-courses\": $options.getCourses,\n      onShowDetails: $options.showDetailsHandler\n    }, null, 8 /* PROPS */, [\"word\", \"role\", \"get-courses\", \"onShowDetails\"]);\n  }), 128 /* KEYED_FRAGMENT */))], 4 /* STYLE */)]), _createCommentVNode(\" Fenêtre modale de sélection des cours \"), $data.modalIsOpen ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createCommentVNode(\" Contenu de la fenêtre de sélection des cours \"), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"ul\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.availableCourses, function (cours, index) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: index,\n      \"class\": \"course-item\"\n    }, [_createTextVNode(_toDisplayString(cours) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: function onClick($event) {\n        return $options.addCourse(cours);\n      },\n      \"class\": \"button-ajouter\",\n      id: \"buttonAjouter\"\n    }, \"Ajouter\", 8 /* PROPS */, _hoisted_8)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = function () {\n      return $options.hideCourseSelection && $options.hideCourseSelection.apply($options, arguments);\n    })\n  }, \"Fermer\")])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["key","_createElementVNode","_createElementBlock","_createVNode","_component_TopProf","_hoisted_1","_hoisted_2","onClick","_cache","$options","showCourseSelection","apply","arguments","style","_normalizeStyle","pointerEvents","$data","modalIsOpen","_Fragment","_renderList","courses","cours","index","_createBlock","_component_ItemCours","word","role","_ctx","getCourses","onShowDetails","showDetailsHandler","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","availableCourses","_createTextVNode","_toDisplayString","$event","addCourse","id","_hoisted_8","hideCourseSelection"],"sources":["/home/koluyantrez/Documents/bac3/gl/Projet-developpement-logiciel-2024-main/src/main/java/com/genieLogiciel/Umons/frontend/src/components/everyone/HomeProf.vue"],"sourcesContent":["<template>\n  <div>\n    <TopProf/>\n    <div class=\"container\">\n      <div class=\"add\">\n        <button @click=\"showCourseSelection\">Ajouter un cours</button>\n      </div>\n      <div class=\"place\" :style=\"{pointerEvents: modalIsOpen ? 'none' : 'auto'}\">\n        <ItemCours v-for=\"(cours, index) in courses\" :word=\"cours\" :key=\"index\" :role=\"role\" :get-courses=\"getCourses\" @show-details=\"showDetailsHandler\" />\n      </div>\n    </div>\n\n    <!-- Fenêtre modale de sélection des cours -->\n    <div v-if=\"modalIsOpen\" class=\"modal\">\n      <!-- Contenu de la fenêtre de sélection des cours -->\n      <div class=\"modal-content\">\n        <h2 class=\"modal-title\">Sélection des cours</h2>\n        <div class=\"course-list\">\n          <ul class=\"course-scroll\">\n            <li v-for=\"(cours, index) in availableCourses\" :key=\"index\" class=\"course-item\">\n              {{ cours }}\n              <button @click=\"addCourse(cours)\" class=\"button-ajouter\" id=\"buttonAjouter\">Ajouter</button>\n            </li>\n          </ul>\n        </div>\n        <button @click=\"hideCourseSelection\">Fermer</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ItemCours from '../../elements/ItemCours.vue';\nimport TopProf from '../../elements/TopProf.vue';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\nexport default {\n  components: { ItemCours, TopProf },\n  data() {\n    return {\n      courses: [],\n      matricule: '',\n      showModal: false,\n      availableCourses: [],\n      modalIsOpen: false,\n    };\n  },\n  methods: {\n    showDetailsHandler(courseName) {\n      // Enregistrer le nom du cours dans les cookies\n      Cookies.set('selectedCourse', courseName);\n      // Rediriger vers la page DetailsCours\n      this.$router.push({ name: 'DetailsCours' });\n    },\n    hideDetail() {\n      // Méthode pour cacher la fenêtre modale de détails\n      this.showDetailModal = false;\n    },\n    addCourse(cours) {\n      const id = Cookies.get('matriculeProfesseur');\n      const coursName = cours;\n\n      axios.post(`http://localhost:1937/assign-course${id}`, null, {\n        params: {\n          coursName: coursName\n        }\n      })\n          .then(response => {\n            const result = response.data;\n            // Gérer la réponse de la méthode attributeCourse\n            if (result === 'attribute success') {\n              // Le cours a été attribué avec succès au professeur\n              // Mettre à jour la liste des cours\n              this.getCourses();\n              // Fermer la fenêtre de sélection des cours\n              this.hideCourseSelection();\n              alert(\"attribute success\");\n            } else {\n              // Gérer les autres cas de retour de la méthode attributeCourse\n            }\n          })\n          .catch(error => {\n            console.error(error);\n            // Gérer les erreurs de requête\n          });\n    },\n    extractNumberBeforeAt(email) {\n      const atIndex = email.indexOf('@');\n      if (atIndex !== -1) {\n        const number = email.substring(0, atIndex);\n        return number;\n      } else {\n        return null;\n      }\n    },\n    getCourses() {\n      const email = Cookies.get('emailProfesseur');\n      const password = Cookies.get('passwordProfesseur');\n      if (!email || !password) {\n        // Gérer le cas où les cookies ne sont pas présents\n        return;\n      }\n      const login = {\n        email: email,\n        password: password\n      };\n      console.log(\"email :  \" + login.email);\n      this.matricule = this.extractNumberBeforeAt(login.email);\n      Cookies.set('matriculeProfesseur', this.matricule);\n      axios.post(`http://localhost:1937/teachers/getCourses`, login)\n          .then(response => {\n            const courses = response.data;\n            this.courses = courses;\n          })\n          .catch(error => {\n            console.error(error);\n            // Gérer les erreurs de requête\n          });\n    },\n    showCourseSelection() {\n      axios.get('http://localhost:1937/cours/AllCours')\n          .then(response => {\n            const courses = response.data;\n            this.availableCourses = courses.map(cours => cours.name);\n            this.modalIsOpen = true;\n          })\n          .catch(error => {\n            console.error(error);\n            // Gérer les erreurs de requête\n          });\n    },\n    hideCourseSelection() {\n      this.modalIsOpen = false;\n    },\n  },\n  created() {\n    this.getCourses();\n  }\n}\n</script>\n\n<style scoped>\n.container {\n  position: absolute;\n  width: 100%;\n  height: 89%;\n  top: 100px;\n  overflow: auto;\n}\n\n.place {\n  position: absolute;\n  top: 5%;\n  left: 10%;\n}\n\n.add {\n  position: relative;\n  top: 0;\n  left: 0;\n  margin-bottom: 20px;\n}\n\n.add button {\n  font-size: 18px;\n  padding: 10px 20px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.add button:hover {\n  background-color: #45a049;\n}\n\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal h2 {\n  color: white;\n}\n\n.modal ul {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n  color: white;\n}\n\n#buttonAjouter {\n  padding: 10px 10px;\n  font-size: 15px;\n  border-radius: 20px;\n  color: white;\n  cursor: pointer;\n  background-color: white;\n  color: black;\n  border: solid black 2px;\n\n}\n\n#buttonAjouter:hover {\n  background-color: green;\n}\n\n.small {\n  background-color: green;\n  font-size: 12px;\n}\n\n.medium {\n  background-color: orange;\n  font-size: 14px;\n}\n\n.large {\n  background-color: red;\n  font-size: 16px;\n}\n\n.modal button {\n  font-size: 18px;\n  padding: 10px 20px;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.modal button:hover {\n  background-color: #45a049;\n}\n\n.course-item {\n  list-style-type: disc;\n  font-size: 20px;\n}\n\n.modal-title {\n  font-size: 30px;\n  transform: translateX(-100px);\n}\n\n.course-item {\n  list-style-type: disc;\n  font-size: 20px;\n}\n\n.course-list {\n  max-height: 300px; /* Hauteur maximale de la liste des cours */\n  overflow-y: auto; /* Activation du défilement vertical */\n}\n\n.course-scroll {\n  padding: 0;\n  margin: 0;\n  color: white;\n  overflow: hidden; /* Masquer le contenu qui dépasse */\n}\n</style>\n"],"mappings":";;;;;EAGS,SAAM;AAAW;;EACf,SAAM;AAAK;;EAJtBA,GAAA;EAa4B,SAAM;;;EAEvB,SAAM;AAAe;;sBACxBC,mBAAA,CAAgD;IAA5C,SAAM;EAAa,GAAC,qBAAmB;AAAA;;EACtC,SAAM;AAAa;;EAClB,SAAM;AAAe;iBAlBnC;;;;uBACEC,mBAAA,CA2BM,cA1BJC,YAAA,CAAUC,kBAAA,GACVH,mBAAA,CAOM,OAPNI,UAOM,GANJJ,mBAAA,CAEM,OAFNK,UAEM,GADJL,mBAAA,CAA8D;IAArDM,OAAK,EAAAC,MAAA,QAAAA,MAAA;MAAA,OAAEC,QAAA,CAAAC,mBAAA,IAAAD,QAAA,CAAAC,mBAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAmB;IAAA;KAAE,kBAAgB,E,GAEvDX,mBAAA,CAEM;IAFD,SAAM,OAAO;IAAEY,KAAK,EAP/BC,eAAA;MAAAC,aAAA,EAOiDC,KAAA,CAAAC,WAAW;IAAA;yBACpDf,mBAAA,CAAoJgB,SAAA,QAR5JC,WAAA,CAQ4CH,KAAA,CAAAI,OAAO,EARnD,UAQ2BC,KAAK,EAAEC,KAAK;yBAA/BC,YAAA,CAAoJC,oBAAA;MAAtGC,IAAI,EAAEJ,KAAK;MAAGrB,GAAG,EAAEsB,KAAK;MAAGI,IAAI,EAAEC,IAAA,CAAAD,IAAI;MAAG,aAAW,EAAEjB,QAAA,CAAAmB,UAAU;MAAGC,aAAY,EAAEpB,QAAA,CAAAqB;;qDAIlIC,mBAAA,2CAA8C,EACnCf,KAAA,CAAAC,WAAW,I,cAAtBf,mBAAA,CAcM,OAdN8B,UAcM,GAbJD,mBAAA,kDAAqD,EACrD9B,mBAAA,CAWM,OAXNgC,UAWM,GAVJC,UAAgD,EAChDjC,mBAAA,CAOM,OAPNkC,UAOM,GANJlC,mBAAA,CAKK,MALLmC,UAKK,I,kBAJHlC,mBAAA,CAGKgB,SAAA,QAtBjBC,WAAA,CAmByCH,KAAA,CAAAqB,gBAAgB,EAnBzD,UAmBwBhB,KAAK,EAAEC,KAAK;yBAAxBpB,mBAAA,CAGK;MAH2CF,GAAG,EAAEsB,KAAK;MAAE,SAAM;QAnB9EgB,gBAAA,CAAAC,gBAAA,CAoBiBlB,KAAK,IAAG,GACX,iBAAApB,mBAAA,CAA4F;MAAnFM,OAAK,WAAAA,QAAAiC,MAAA;QAAA,OAAE/B,QAAA,CAAAgC,SAAS,CAACpB,KAAK;MAAA;MAAG,SAAM,gBAAgB;MAACqB,EAAE,EAAC;OAAgB,SAAO,iBArBjGC,UAAA,E;sCAyBQ1C,mBAAA,CAAoD;IAA3CM,OAAK,EAAAC,MAAA,QAAAA,MAAA;MAAA,OAAEC,QAAA,CAAAmC,mBAAA,IAAAnC,QAAA,CAAAmC,mBAAA,CAAAjC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAmB;IAAA;KAAE,QAAM,E,OAzBnDmB,mBAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}