{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withKeys as _withKeys, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../../assets/illumis.png';\nimport _imports_1 from '../../assets/lang.png';\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-ff4e43aa\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"container1\"\n};\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"img\", {\n    \"class\": \"logo\",\n    src: _imports_0,\n    alt: \"MyLogo\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_3 = {\n  \"class\": \"forb\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_ItemInput = _resolveComponent(\"ItemInput\");\n  var _component_center = _resolveComponent(\"center\");\n  var _component_ItemButton = _resolveComponent(\"ItemButton\");\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_center, null, {\n    \"default\": _withCtx(function () {\n      return [_hoisted_2, _createElementVNode(\"h1\", null, _toDisplayString($data.cLang.FirstPage.region), 1 /* TEXT */), _createVNode(_component_ItemInput, {\n        type: \"text\",\n        name: \"Email\",\n        val: $data.email,\n        \"onUpdate:val\": _cache[0] || (_cache[0] = function ($event) {\n          return $data.email = $event;\n        }),\n        onKeyup: _withKeys($options.submitform, [\"enter\"])\n      }, null, 8 /* PROPS */, [\"val\", \"onKeyup\"]), _createVNode(_component_ItemInput, {\n        type: \"password\",\n        name: $data.cLang.FirstPage.pw,\n        val: $data.password,\n        \"onUpdate:val\": _cache[1] || (_cache[1] = function ($event) {\n          return $data.password = $event;\n        }),\n        onKeyup: _withKeys($options.submitform, [\"enter\"])\n      }, null, 8 /* PROPS */, [\"name\", \"val\", \"onKeyup\"])];\n    }),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_ItemButton, {\n    name: $data.cLang.FirstPage.login,\n    onClick: $options.submitform\n  }, null, 8 /* PROPS */, [\"name\", \"onClick\"]), _createVNode(_component_router_link, {\n    to: \"/guest\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_ItemButton, {\n        name: $data.cLang.FirstPage.guest\n      }, null, 8 /* PROPS */, [\"name\"])];\n    }),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"img\", {\n    \"class\": \"la\",\n    alt: \"Change the language\",\n    src: _imports_1,\n    onClick: _cache[2] || (_cache[2] = function () {\n      return $data.switchLang && $data.switchLang.apply($data, arguments);\n    })\n  })]);\n}","map":{"version":3,"names":["_imports_0","_imports_1","_createElementVNode","src","alt","_createElementBlock","_hoisted_1","_createVNode","_component_center","_withCtx","_hoisted_2","_toDisplayString","$data","cLang","FirstPage","region","_component_ItemInput","type","name","val","email","_cache","$event","onKeyup","_withKeys","$options","submitform","pw","password","_","_hoisted_3","_component_ItemButton","login","onClick","_component_router_link","to","guest","switchLang","apply","arguments"],"sources":["C:\\Users\\trist\\Desktop\\projet-gl-main\\frontend\\src\\components\\everyone\\FirstPage.vue"],"sourcesContent":["<template>\n  <div class=\"container1\">\n    <center>\n      <img class=\"logo\" src=\"../../assets/illumis.png\" alt=\"MyLogo\">\n      <h1>{{cLang.FirstPage.region}}</h1>\n      <ItemInput type=\"text\" name=\"Email\" v-model:val=\"email\" @keyup.enter=\"submitform\"/>\n      <ItemInput type=\"password\" :name=\"cLang.FirstPage.pw\" v-model:val=\"password\" @keyup.enter=\"submitform\"/>\n    </center>\n    <div class=\"forb\">\n      <ItemButton :name=\"cLang.FirstPage.login\" @click=\"submitform\" />\n      <router-link to=\"/guest\">\n        <ItemButton :name=\"cLang.FirstPage.guest\"/>\n      </router-link>\n    </div>\n    <img class=\"la\" alt=\"Change the language\" src=\"../../assets/lang.png\" @click=\"switchLang\"/>\n  </div>\n</template>\n\n<script>\nimport ItemButton from '../../elements/ItemButton.vue';\nimport ItemInput from '../../elements/ItemInput.vue';\nimport { useStore } from 'vuex';\nimport { computed, watch, ref } from 'vue';\nimport fr from '../../views/fr.js'\nimport en from '../../views/en.js'\nimport Cookies from 'js-cookie';\n\nfunction determineUserRole(email) {\n  console.log(email);\n  if (email.endsWith(\"@Illumis.assistant.ac.be\")) {\n    return \"assistant\";\n  } else if (email.endsWith(\"@Illumis.professeur.ac.be\")) {\n    return \"professeur\";\n  } else if (email.endsWith(\"@Illumis.student.ac.be\")) {\n    return \"student\";\n  }else if (email.endsWith(\"@Illumis.inscription.ac.be\")) {\n    return \"inscription\";\n  }\n  else {\n    return \"inconnu\";\n  }\n}\nexport default {\n  components: { ItemButton, ItemInput },\n  data() {\n    const store = useStore();\n    const idLa = computed(() => store.state.lang.curLang);\n    const cLang = ref(idLa.value === 'fr' ? fr : en);\n    const switchLang = () => {\n        if (idLa.value === 'fr') {\n            store.commit('setLang', 'en');\n        }\n        else if (idLa.value === 'en') {\n            store.commit('setLang', 'fr');\n        } \n    };\n    watch(idLa, (newLang) => {\n      cLang.value = newLang === 'fr' ? fr : en;\n    });\n    return {\n      switchLang,\n      cLang,\n      email: '',\n      password: '',\n      role: 'inconnu'\n    };\n  },\n  methods: {\n    extractNumberBeforeAt(email) {\n      const atIndex = email.indexOf('@');\n      if (atIndex !== -1) {\n        return email.substring(0, atIndex);\n      }\n      return null;\n    },\n    submitform() {\n      const authentification = {\n        email: this.email,\n        password: this.password,\n      };\n      fetch('http://localhost:1937/login_', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(authentification)\n      })\n          .then(response => {\n            this.role = determineUserRole(this.email);\n            if (response.ok) {\n              Cookies.set('email', this.email);\n              Cookies.set('password', this.password);\n              Cookies.set('role', this.role);\n\n              if (this.role === 'student') {\n                Cookies.set('emailStudent', this.email);\n                Cookies.set('passwordStudent', this.password);\n                this.$router.push({\n                  name: 'student',\n                  query: {\n                    email: this.email,\n                    password: this.password\n                  }\n                });\n              } else if (this.role === 'professeur') {\n                Cookies.set('emailProfesseur', this.email);\n                Cookies.set('passwordProfesseur', this.password);\n                const mat = this.extractNumberBeforeAt(this.email);\n                Cookies.set('matriculeProfesseur', mat);\n                this.$router.push({\n                  name: 'prof',\n                  query: {\n                    email: this.email,\n                    password: this.password\n                  }\n                });\n              } else if (this.role === 'inscription') {\n                Cookies.set('emailInscription', this.email);\n                Cookies.set('passwordInscription', this.password);\n                const mat = this.extractNumberBeforeAt(this.email);\n                Cookies.set('matriculeInscription', mat);\n                this.$router.push({\n                  name: 'inscription',\n                  query: {\n                    email: this.email,\n                    password: this.password\n                  }\n                });\n              }\n            } else {\n              // Gestion des erreurs\n            }\n          })\n          .catch(error => {\n            console.error('Erreur : ', error.message);\n            alert('Erreur lors de la connexion au serveur : ' + error.message);\n          });\n    }\n  }\n\n\n};\n</script>\n\n<style scoped>\n.container1 h1 {\n  font-family: Roboto, sans-serif;\n  font-optical-sizing: auto;\n  font-size: 3rem;\n  font-stretch: 100%;\n  font-weight: 600;\n  color: rgb(236, 210, 210);\n}\n\n.container1 {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #9F0924;\n  z-index: 90;\n}\n\n.logo {\n  width: 500px;\n  height: 220px;\n}\n\n.forb {\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n  align-items: center;\n}\n\n.la{\n  position: relative;\n  width: 5rem;\n  height: auto;\n  bottom: -30px;\n  left: 47%;\n  }\n</style>\n\n"],"mappings":";OAGwBA,UAA8B;OAWRC,UAA2B;;;;;EAblE,SAAM;AAAY;;sBAEnBC,mBAAA,CAA8D;IAAzD,SAAM,MAAM;IAACC,GAA8B,EAA9BH,UAA8B;IAACI,GAAG,EAAC;;;;EAKlD,SAAM;AAAM;;;;;;uBAPnBC,mBAAA,CAcM,OAdNC,UAcM,GAbJC,YAAA,CAKSC,iBAAA;IAPb,WAAAC,QAAA,CAGM;MAAA,OAA8D,CAA9DC,UAA8D,EAC9DR,mBAAA,CAAmC,YAAAS,gBAAA,CAA7BC,KAAA,CAAAC,KAAK,CAACC,SAAS,CAACC,MAAM,kBAC5BR,YAAA,CAAmFS,oBAAA;QAAxEC,IAAI,EAAC,MAAM;QAACC,IAAI,EAAC,OAAO;QAASC,GAAG,EAAEP,KAAA,CAAAQ,KAAK;QAL5D,gBAAAC,MAAA,QAAAA,MAAA,gBAAAC,MAAA;UAAA,OAKuDV,KAAA,CAAAQ,KAAK,GAAAE,MAAA;QAAA;QAAGC,OAAK,EALpEC,SAAA,CAK4EC,QAAA,CAAAC,UAAU;mDAChFnB,YAAA,CAAwGS,oBAAA;QAA7FC,IAAI,EAAC,UAAU;QAAEC,IAAI,EAAEN,KAAA,CAAAC,KAAK,CAACC,SAAS,CAACa,EAAE;QAAUR,GAAG,EAAEP,KAAA,CAAAgB,QAAQ;QANjF,gBAAAP,MAAA,QAAAA,MAAA,gBAAAC,MAAA;UAAA,OAMyEV,KAAA,CAAAgB,QAAQ,GAAAN,MAAA;QAAA;QAAGC,OAAK,EANzFC,SAAA,CAMiGC,QAAA,CAAAC,UAAU;;;IAN3GG,CAAA;MAQI3B,mBAAA,CAKM,OALN4B,UAKM,GAJJvB,YAAA,CAAgEwB,qBAAA;IAAnDb,IAAI,EAAEN,KAAA,CAAAC,KAAK,CAACC,SAAS,CAACkB,KAAK;IAAGC,OAAK,EAAER,QAAA,CAAAC;gDAClDnB,YAAA,CAEc2B,sBAAA;IAFDC,EAAE,EAAC;EAAQ;IAV9B,WAAA1B,QAAA,CAWQ;MAAA,OAA2C,CAA3CF,YAAA,CAA2CwB,qBAAA;QAA9Bb,IAAI,EAAEN,KAAA,CAAAC,KAAK,CAACC,SAAS,CAACsB;;;IAX3CP,CAAA;QAcI3B,mBAAA,CAA2F;IAAtF,SAAM,IAAI;IAACE,GAAG,EAAC,qBAAqB;IAACD,GAA2B,EAA3BF,UAA2B;IAAEgC,OAAK,EAAAZ,MAAA,QAAAA,MAAA;MAAA,OAAET,KAAA,CAAAyB,UAAA,IAAAzB,KAAA,CAAAyB,UAAA,CAAAC,KAAA,CAAA1B,KAAA,EAAA2B,SAAA,CAAU;IAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}