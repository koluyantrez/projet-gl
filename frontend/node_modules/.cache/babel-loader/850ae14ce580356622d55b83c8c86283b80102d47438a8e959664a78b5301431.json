{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { ref, onMounted } from 'vue';\nimport $ from 'jquery';\nexport default {\n  name: 'RoomManagement',\n  setup: function setup() {\n    var buildings = ref([]);\n    var newRoom = ref({\n      associatedBuilding: '',\n      type: 'OFFICE',\n      capacity: 0,\n      status: 'AVAILABLE',\n      equipment: [],\n      available: 'true'\n    });\n    var filter = ref({\n      building: '',\n      type: ''\n    });\n    var rooms = ref([]);\n    onMounted(function () {\n      fetch('http://localhost:1937/api/buildings').then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        buildings.value = data;\n        buildings.value.push('All Buildings');\n        initializeSelect2();\n      })[\"catch\"](function (error) {\n        return console.error('Error fetching buildings:', error);\n      });\n      fetchRooms();\n    });\n    var addRoom = function addRoom() {\n      fetch('http://localhost:1937/api/rooms', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newRoom.value)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        if (data.message === \"Room added successfully\") {\n          newRoom.value = {\n            associatedBuilding: '',\n            type: 'OFFICE',\n            capacity: 0,\n            status: 'AVAILABLE',\n            equipment: [],\n            available: 'true'\n          };\n          fetchRooms();\n        } else {\n          alert(data.message);\n        }\n      })[\"catch\"](function (error) {\n        return console.error('Error:', error);\n      });\n    };\n    var filterRooms = function filterRooms() {\n      fetchRooms();\n    };\n    var fetchRooms = function fetchRooms() {\n      var url = \"http://localhost:1937/api/rooms\";\n      if (filter.value.building && filter.value.building !== 'All Buildings') {\n        url += \"?building=\".concat(filter.value.building);\n      }\n      if (filter.value.type) {\n        url += url.includes('?') ? \"&type=\".concat(filter.value.type) : \"?type=\".concat(filter.value.type);\n      }\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        rooms.value = data;\n      })[\"catch\"](function (error) {\n        return console.error('Error fetching rooms:', error);\n      });\n    };\n    var toggleRoomStatus = function toggleRoomStatus(room) {\n      var newStatus = room.status === 'AVAILABLE' ? 'UNAVAILABLE' : 'AVAILABLE';\n      fetch(\"http://localhost:1937/api/rooms/update/\".concat(room.name, \"/status\"), {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status: newStatus\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (updatedRoom) {\n        room.status = updatedRoom.status;\n      })[\"catch\"](function (error) {\n        return console.error('Error:', error);\n      });\n    };\n    var initializeSelect2 = function initializeSelect2() {\n      setTimeout(function () {\n        $('#associatedBuilding').select2();\n        $('#filterBuilding').select2();\n        $('#equipement').select2();\n      }, 100); // Delay to ensure elements are rendered\n    };\n    return {\n      buildings: buildings,\n      newRoom: newRoom,\n      filter: filter,\n      rooms: rooms,\n      addRoom: addRoom,\n      filterRooms: filterRooms,\n      toggleRoomStatus: toggleRoomStatus\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","$","name","setup","buildings","newRoom","associatedBuilding","type","capacity","status","equipment","available","filter","building","rooms","fetch","then","response","json","data","value","push","initializeSelect2","error","console","fetchRooms","addRoom","method","headers","body","JSON","stringify","message","alert","filterRooms","url","concat","includes","toggleRoomStatus","room","newStatus","updatedRoom","setTimeout","select2"],"sources":["C:\\Users\\trist\\Desktop\\projet-gl-main\\frontend\\src\\components\\extensionOussama\\RoomManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <h1>Room Management System</h1>\r\n\r\n    <!-- Form to Add Room -->\r\n    <form @submit.prevent=\"addRoom\" class=\"mb-4\">\r\n      <h2>Add Room</h2>\r\n      <div class=\"form-group\">\r\n        <label for=\"associatedBuilding\">Associated Building:</label>\r\n        <select v-model=\"newRoom.associatedBuilding\" id=\"associatedBuilding\" class=\"form-control\" required>\r\n          <option v-for=\"building in buildings\" :key=\"building\" :value=\"building\">{{ building }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"type\">Type:</label>\r\n        <select v-model=\"newRoom.type\" id=\"type\" class=\"form-control\" required>\r\n          <option value=\"OFFICE\">Office</option>\r\n          <option value=\"CLASSROOM\">Classroom</option>\r\n          <option value=\"CONFERENCE_ROOM\">Conference Room</option>\r\n          <option value=\"LABORATORY\">Laboratory</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"capacity\">Capacity:</label>\r\n        <input type=\"number\" v-model=\"newRoom.capacity\" id=\"capacity\" class=\"form-control\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"status\">Status:</label>\r\n        <select v-model=\"newRoom.status\" id=\"status\" class=\"form-control\" required>\r\n          <option value=\"AVAILABLE\">Available</option>\r\n          <option value=\"UNAVAILABLE\">Unavailable</option>\r\n          <option value=\"OCCUPIED\">Occupied</option>\r\n          <option value=\"RESERVED\">Reserved</option>\r\n          <option value=\"MAINTENANCE\">Maintenance</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"equipement\">Equipments:</label>\r\n        <select v-model=\"newRoom.equipment\" id=\"equipement\" class=\"form-control\" multiple>\r\n          <option value=\"PROJECTOR\">Projector</option>\r\n          <option value=\"WHITEBOARD\">Whiteboard</option>\r\n          <option value=\"COMPUTER\">Computer</option>\r\n          <option value=\"SPEAKERS\">Speakers</option>\r\n          <option value=\"TELEPHONE\">Telephone</option>\r\n          <option value=\"OTHER\">Other</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"available\">Available:</label>\r\n        <select v-model=\"newRoom.available\" id=\"available\" class=\"form-control\">\r\n          <option value=\"true\">Yes</option>\r\n          <option value=\"false\">No</option>\r\n        </select>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-primary\">Add Room</button>\r\n    </form>\r\n\r\n    <hr>\r\n\r\n    <!-- Form to Filter Rooms -->\r\n    <h2>Filter Rooms</h2>\r\n    <form @submit.prevent=\"filterRooms\" class=\"mb-4\">\r\n      <div class=\"form-group\">\r\n        <label for=\"filterBuilding\">Building:</label>\r\n        <select v-model=\"filter.building\" id=\"filterBuilding\" class=\"form-control\">\r\n          <option value=\"\">All Buildings</option>\r\n          <option v-for=\"building in buildings\" :key=\"building\" :value=\"building\">{{ building }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"filterType\">Type:</label>\r\n        <select v-model=\"filter.type\" id=\"filterType\" class=\"form-control\">\r\n          <option value=\"\">All Types</option>\r\n          <option value=\"OFFICE\">Office</option>\r\n          <option value=\"CLASSROOM\">Classroom</option>\r\n          <option value=\"CONFERENCE_ROOM\">Conference Room</option>\r\n          <option value=\"LABORATORY\">Laboratory</option>\r\n        </select>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn btn-secondary\">Filter</button>\r\n    </form>\r\n\r\n    <hr>\r\n\r\n    <h2>Rooms List</h2>\r\n    <div class=\"row\">\r\n      <div v-for=\"room in rooms\" :key=\"room.name\" class=\"col-md-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">{{ room.name }}</h5>\r\n            <p class=\"card-text\">Building: {{ room.associatedBuilding }}</p>\r\n            <p class=\"card-text\">Type: {{ room.type }}</p>\r\n            <p class=\"card-text\">Capacity: {{ room.capacity }}</p>\r\n            <p class=\"card-text\">Status: {{ room.status }}</p>\r\n            <p class=\"card-text\">Equipment: {{ room.equipment ? room.equipment.join(', ') : 'None' }}</p>\r\n            <button @click=\"toggleRoomStatus(room)\" class=\"btn btn-secondary\">\r\n              Set Status to {{ room.status === 'AVAILABLE' ? 'UNAVAILABLE' : 'AVAILABLE' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n  name: 'RoomManagement',\r\n  setup() {\r\n    const buildings = ref([]);\r\n    const newRoom = ref({\r\n      associatedBuilding: '',\r\n      type: 'OFFICE',\r\n      capacity: 0,\r\n      status: 'AVAILABLE',\r\n      equipment: [],\r\n      available: 'true'\r\n    });\r\n    const filter = ref({\r\n      building: '',\r\n      type: ''\r\n    });\r\n    const rooms = ref([]);\r\n\r\n    onMounted(() => {\r\n      fetch('http://localhost:1937/api/buildings')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            buildings.value = data;\r\n            buildings.value.push('All Buildings');\r\n            initializeSelect2();\r\n          })\r\n          .catch(error => console.error('Error fetching buildings:', error));\r\n\r\n      fetchRooms();\r\n    });\r\n\r\n    const addRoom = () => {\r\n      fetch('http://localhost:1937/api/rooms', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(newRoom.value)\r\n      })\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            if (data.message === \"Room added successfully\") {\r\n              newRoom.value = {\r\n                associatedBuilding: '',\r\n                type: 'OFFICE',\r\n                capacity: 0,\r\n                status: 'AVAILABLE',\r\n                equipment: [],\r\n                available: 'true'\r\n              };\r\n              fetchRooms();\r\n            } else {\r\n              alert(data.message);\r\n            }\r\n          })\r\n          .catch(error => console.error('Error:', error));\r\n    };\r\n\r\n    const filterRooms = () => {\r\n      fetchRooms();\r\n    };\r\n\r\n    const fetchRooms = () => {\r\n      let url = `http://localhost:1937/api/rooms`;\r\n      if (filter.value.building && filter.value.building !== 'All Buildings') {\r\n        url += `?building=${filter.value.building}`;\r\n      }\r\n      if (filter.value.type) {\r\n        url += url.includes('?') ? `&type=${filter.value.type}` : `?type=${filter.value.type}`;\r\n      }\r\n\r\n      fetch(url)\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            rooms.value = data;\r\n          })\r\n          .catch(error => console.error('Error fetching rooms:', error));\r\n    };\r\n\r\n    const toggleRoomStatus = (room) => {\r\n      const newStatus = room.status === 'AVAILABLE' ? 'UNAVAILABLE' : 'AVAILABLE';\r\n      fetch(`http://localhost:1937/api/rooms/update/${room.name}/status`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ status: newStatus })\r\n      })\r\n          .then(response => response.json())\r\n          .then(updatedRoom => {\r\n            room.status = updatedRoom.status;\r\n          })\r\n          .catch(error => console.error('Error:', error));\r\n    };\r\n\r\n    const initializeSelect2 = () => {\r\n      setTimeout(() => {\r\n        $('#associatedBuilding').select2();\r\n        $('#filterBuilding').select2();\r\n        $('#equipement').select2();\r\n      }, 100); // Delay to ensure elements are rendered\r\n    };\r\n\r\n    return {\r\n      buildings,\r\n      newRoom,\r\n      filter,\r\n      rooms,\r\n      addRoom,\r\n      filterRooms,\r\n      toggleRoomStatus\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  margin-bottom: 20px;\r\n}\r\n.card-body {\r\n  text-align: left;\r\n}\r\n.navbar-text {\r\n  margin-left: auto;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}